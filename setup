#!/bin/bash

curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/build?$RANDOM > /usr/local/bin/build
chmod +777 /usr/local/bin/build

curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/build.py?$RANDOM > /usr/local/bin/build.py
chmod +777 /usr/local/bin/build.py

curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/install.py?$RANDOM > /usr/local/bin/install.py
chmod +777 /usr/local/bin/install.py

temp=$(mktemp -d)
echo "Installing cmake module"
curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/DependenciesConfig.cmake > $temp/DependenciesConfig.cmake
curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/CMakeLists.txt > $temp/CMakeLists.txt

cd $temp
cmake . ~> /dev/null
make install ~> /dev/null

echo "Installiing python module"
curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/dependencies/__init__.py?$RANDOM > $temp/__init__.py
curl -s https://raw.githubusercontent.com/germanespinosa/dependencies/main/dependencies/__version__.py?$RANDOM > $temp/__version__.py
python __init__.py
